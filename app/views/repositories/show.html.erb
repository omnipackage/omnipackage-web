<h1>Repository for <%= @repository.distro.name %></h1>

<p>
  <span class="font-monospace"><%= @repository.url %></span>
</p>

<p>
  Published at <span><%= @repository.published_at %></span>
</p>

<p>
  <strong>GPG public key fingerprint</strong>
  <pre class="pre-line-wrap"><%= @repository.gpg_key.public_info %></pre>
</p>

<p>
  <strong>Add repository and install package</strong>
  <pre class="pre-line-wrap"><%= @repository.installable_cli %></pre>
</p>

<p>
  <strong>Last publish error</strong>
  <pre class="pre-line-wrap"><%= @repository.last_publish_error %></pre>
</p>

<p>
  <% if @repository.bucket_exists? %>
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">File</th>
          <th scope="col">Size</th>
          <th scope="col">Modified at</th>
        </tr>
      </thead>

      <tbody>

        <% @repository.ls.each do |fo| %>
          <tr>
            <td><%= link_to(fo.key, fo.url) %></td>
            <td><%= number_to_human_size(fo.size) %></td>
            <td><%= fo.last_modified_at %></td>
          </tr>
        <% end %>

      </tbody>
    </table>
  <% else %>
    <p>
      <span>Storage bucket does not exists. Create it?</span>
    </p>
  <% end %>
</p>

<br>
<p>
  <%= link_to 'Back to repositories list', repositories_path, class: 'btn btn-link' %>
</p>
