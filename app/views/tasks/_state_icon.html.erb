<%# locals: (task:) -%>

<span class="m-1">
  <% case task.state %>
  <% when 'running' %>
    <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
  <% when 'pending_build' %>
    <i class="bi bi-alarm-fill"></i>
  <% when 'pending_fetch' %>
    <i class="bi bi-cloud-arrow-down-fill"></i>
  <% when 'finished' %>
    <i class="bi bi-check-circle-fill text-success"></i>
  <% when 'cancelled' %>
    <i class="bi bi-exclamation-diamond-fill text-warning"></i>
  <% when 'failed' %>
    <% if task.artefacts.successful.exists? %>
      <i class="bi bi-exclamation-triangle-fill text-warning"></i>
    <% else %>
      <i class="bi bi-exclamation-triangle-fill text-danger"></i>
    <% end %>
  <% end %>
</span>
